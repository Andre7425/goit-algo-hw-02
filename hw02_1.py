import queue
import time
import random

# –°—Ç–≤–æ—Ä–∏—Ç–∏ —á–µ—Ä–≥—É –∑–∞—è–≤–æ–∫
# –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –∫–ª–∞—Å Queue –∑ –º–æ–¥—É–ª—è queue
request_queue = queue.Queue()


def generate_request():
    """
    –ì–µ–Ω–µ—Ä—É—î –Ω–æ–≤—É –∑–∞—è–≤–∫—É —Ç–∞ –¥–æ–¥–∞—î —ó—ó –¥–æ —á–µ—Ä–≥–∏.
    """
    # –ì–µ–Ω–µ—Ä—É—î–º–æ —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π –Ω–æ–º–µ—Ä –∑–∞—è–≤–∫–∏ (–≤—ñ–¥ 1 –¥–æ 1000)
    request_id = random.randint(1, 1000)
    request_data = f"–ó–∞—è–≤–∫–∞ #{request_id}"
  
    # –î–æ–¥–∞—î–º–æ –∑–∞—è–≤–∫—É –¥–æ —á–µ—Ä–≥–∏
    request_queue.put(request_data)
    print(f"üì• [–ù–û–í–ê –ó–ê–Ø–í–ö–ê]: {request_data} –¥–æ–¥–∞–Ω–∞ –¥–æ —á–µ—Ä–≥–∏.")


def process_request():
    """
    –û–±—Ä–æ–±–ª—è—î –∑–∞—è–≤–∫—É: –≤–∏–¥–∞–ª—è—î —ó—ó –∑ —á–µ—Ä–≥–∏.
    –Ø–∫—â–æ —á–µ—Ä–≥–∞ –ø—É—Å—Ç–∞, –≤–∏–≤–æ–¥–∏—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è.
    """
    # –Ø–∫—â–æ —á–µ—Ä–≥–∞ –Ω–µ –ø—É—Å—Ç–∞
    if not request_queue.empty():
        # –í–∏–¥–∞–ª–∏—Ç–∏ –∑–∞—è–≤–∫—É –∑ —á–µ—Ä–≥–∏ (FIFO - First In, First Out)
        current_request = request_queue.get()
        
        print(f"‚öôÔ∏è [–û–ë–†–û–ë–ö–ê]: –û–±—Ä–æ–±–ª—è—î—Ç—å—Å—è {current_request}...")
        # –Ü–º—ñ—Ç—É—î–º–æ —á–∞—Å, –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏–π –Ω–∞ –æ–±—Ä–æ–±–∫—É
        time.sleep(1) 
        print(f"‚úÖ [–ì–û–¢–û–í–û]: {current_request} —É—Å–ø—ñ—à–Ω–æ –æ–±—Ä–æ–±–ª–µ–Ω–∞.")
    else:
        # –Ü–Ω–∞–∫—à–µ: –≤–∏–≤–µ—Å—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, —â–æ —á–µ—Ä–≥–∞ –ø—É—Å—Ç–∞
        print("üí§ [–ß–ï–†–ì–ê –ü–£–°–¢–ê]: –ù–µ–º–∞—î –∑–∞—è–≤–æ–∫ –¥–ª—è –æ–±—Ä–æ–±–∫–∏.")


def main():
    print("--- –°–∏—Å—Ç–µ–º–∞ –æ–±—Ä–æ–±–∫–∏ –∑–∞—è–≤–æ–∫ –∑–∞–ø—É—â–µ–Ω–∞ ---")
    print("–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å Ctrl+C, —â–æ–± –∑—É–ø–∏–Ω–∏—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º—É.\n")
    
    try:
        # –ì–æ–ª–æ–≤–Ω–∏–π —Ü–∏–∫–ª –ø—Ä–æ–≥—Ä–∞–º–∏
        while True:
            # –Ü–º—ñ—Ç—É—î–º–æ –≤—ñ—Ä–æ–≥—ñ–¥–Ω—ñ—Å—Ç—å –Ω–∞–¥—Ö–æ–¥–∂–µ–Ω–Ω—è –Ω–æ–≤–æ—ó –∑–∞—è–≤–∫–∏
            # (—ñ–Ω–∫–æ–ª–∏ –∑–∞—è–≤–∫–∏ –Ω–∞–¥—Ö–æ–¥—è—Ç—å —à–≤–∏–¥—à–µ, –Ω—ñ–∂ –æ–±—Ä–æ–±–ª—è—é—Ç—å—Å—è, —ñ–Ω–∫–æ–ª–∏ –Ω–∞–≤–ø–∞–∫–∏)
            if random.choice([True, True, False]): 
                generate_request()
            
            # –ü–∞—É–∑–∞ –º—ñ–∂ –æ–ø–µ—Ä–∞—Ü—ñ—è–º–∏ –¥–ª—è –Ω–∞–æ—á–Ω–æ—Å—Ç—ñ
            time.sleep(0.5)
            
            # –°–ø—Ä–æ–±–∞ –æ–±—Ä–æ–±–∏—Ç–∏ –∑–∞—è–≤–∫—É
            process_request()
            
            # –ü–∞—É–∑–∞ –ø–µ—Ä–µ–¥ –Ω–∞—Å—Ç—É–ø–Ω–æ—é —ñ—Ç–µ—Ä–∞—Ü—ñ—î—é —Ü–∏–∫–ª—É
            time.sleep(1)

    except KeyboardInterrupt:
        print("\nüõë –†–æ–±–æ—Ç—É –ø—Ä–æ–≥—Ä–∞–º–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º.")


if __name__ == "__main__":
    main()